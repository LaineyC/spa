

<div>
  <a ng-click="openPlunkr('examples/example-example62')" class="btn pull-right">
    <i class="glyphicon glyphicon-edit">&nbsp;</i>
    Edit in Plunker</a>
  <div class="runnable-example"
      path="examples/example-example62"
      module="intervalExample">

   
    <div class="runnable-example-file" 
      name="index.html"
      language="html"
      type="html">
      <pre><code>&lt;script&gt;&#10;angular.module(&#39;intervalExample&#39;, [])&#10;  .controller(&#39;ExampleController&#39;, [&#39;$scope&#39;, &#39;$interval&#39;,&#10;    function($scope, $interval) {&#10;      $scope.format = &#39;M/d/yy h:mm:ss a&#39;;&#10;      $scope.blood_1 = 100;&#10;      $scope.blood_2 = 120;&#10;&#10;      var stop;&#10;      $scope.fight = function() {&#10;        // Don&#39;t start a new fight if we are already fighting&#10;        if ( angular.isDefined(stop) ) return;&#10;&#10;      stop = $interval(function() {&#10;        if ($scope.blood_1 &gt; 0 &amp;&amp; $scope.blood_2 &gt; 0) {&#10;          $scope.blood_1 = $scope.blood_1 - 3;&#10;          $scope.blood_2 = $scope.blood_2 - 4;&#10;        } else {&#10;          $scope.stopFight();&#10;        }&#10;      }, 100);&#10;    };&#10;&#10;    $scope.stopFight = function() {&#10;      if (angular.isDefined(stop)) {&#10;        $interval.cancel(stop);&#10;        stop = undefined;&#10;      }&#10;    };&#10;&#10;    $scope.resetFight = function() {&#10;      $scope.blood_1 = 100;&#10;      $scope.blood_2 = 120;&#10;    };&#10;&#10;    $scope.$on(&#39;$destroy&#39;, function() {&#10;      // Make sure that the interval is destroyed too&#10;      $scope.stopFight();&#10;    });&#10;  }])&#10;  // Register the &#39;myCurrentTime&#39; directive factory method.&#10;  // We inject $interval and dateFilter service since the factory method is DI.&#10;  .directive(&#39;myCurrentTime&#39;, [&#39;$interval&#39;, &#39;dateFilter&#39;,&#10;    function($interval, dateFilter) {&#10;      // return the directive link function. (compile function not needed)&#10;      return function(scope, element, attrs) {&#10;        var format,  // date format&#10;            stopTime; // so that we can cancel the time updates&#10;&#10;        // used to update the UI&#10;        function updateTime() {&#10;          element.text(dateFilter(new Date(), format));&#10;        }&#10;&#10;        // watch the expression, and update the UI on change.&#10;        scope.$watch(attrs.myCurrentTime, function(value) {&#10;          format = value;&#10;          updateTime();&#10;        });&#10;&#10;        stopTime = $interval(updateTime, 1000);&#10;&#10;        // listen on DOM destroy (removal) event, and cancel the next UI update&#10;        // to prevent updating time after the DOM element was removed.&#10;        element.on(&#39;$destroy&#39;, function() {&#10;          $interval.cancel(stopTime);&#10;        });&#10;      }&#10;    }]);&#10;&lt;/script&gt;&#10;&#10;&lt;div&gt;&#10;&lt;div ng-controller=&quot;ExampleController&quot;&gt;&#10;  Date format: &lt;input ng-model=&quot;format&quot;&gt; &lt;hr/&gt;&#10;  Current time is: &lt;span my-current-time=&quot;format&quot;&gt;&lt;/span&gt;&#10;  &lt;hr/&gt;&#10;  Blood 1 : &lt;font color=&#39;red&#39;&gt;{{blood_1}}&lt;/font&gt;&#10;  Blood 2 : &lt;font color=&#39;red&#39;&gt;{{blood_2}}&lt;/font&gt;&#10;  &lt;button type=&quot;button&quot; data-ng-click=&quot;fight()&quot;&gt;Fight&lt;/button&gt;&#10;  &lt;button type=&quot;button&quot; data-ng-click=&quot;stopFight()&quot;&gt;StopFight&lt;/button&gt;&#10;  &lt;button type=&quot;button&quot; data-ng-click=&quot;resetFight()&quot;&gt;resetFight&lt;/button&gt;&#10;&lt;/div&gt;&#10;&lt;/div&gt;</code></pre>
    </div>
  

    <iframe class="runnable-example-frame" src="examples/example-example62/index.html" name="example-example62"></iframe>
  </div>
</div>


39;,&#10;    function() {&#10;  invalidJsonpBtn.click();&#10;  fetchBtn.click();&#10;  expect(status.getText()).toMatch(&#39;0&#39;);&#10;  expect(data.getText()).toMatch(&#39;Request failed&#39;);&#10;});</code></pre>
    </div>
  

    <iframe class="runnable-example-frame" src="examples/example-example59/index.html" name="example-example59"></iframe>
  </div>
</div>


